# 城市供水系统多场景分析

本目录包含城市供水系统在不同运行条件下的场景分析工具。

## 📋 场景列表

| 场景编号 | 场景名称 | 描述 | 入流倍数 | 需求倍数 | 泵站容量 | 初始库容 |
|---------|---------|------|---------|---------|---------|---------|
| 场景1 | 正常运行 | 基准场景，正常入流和需求 | 100% | 100% | 200 m³/h | 50,000 m³ |
| 场景2 | 缺水场景 | 入流减少30%，模拟旱季 | 70% | 100% | 200 m³/h | 50,000 m³ |
| 场景3 | 高峰需求 | 需求增加40%，模拟特殊活动 | 100% | 140% | 200 m³/h | 50,000 m³ |
| 场景4 | 严重干旱 | 入流减少50%，低库存 | 50% | 100% | 200 m³/h | 35,000 m³ |
| 场景5 | 设备故障 | 泵站容量降低40% | 100% | 100% | 120 m³/h | 50,000 m³ |

## 🚀 快速开始

### 运行所有场景对比

```bash
python multi_scenario_analysis.py
```

该脚本将：
1. 自动运行全部5个场景
2. 生成对比分析图表
3. 生成详细对比报告
4. 保存所有结果数据

### 输出文件

运行完成后，在 `comparison_results/` 目录下会生成：

```
comparison_results/
├── scenario1_normal_results.csv              # 场景1详细数据
├── scenario2_water_shortage_results.csv      # 场景2详细数据
├── scenario3_peak_demand_results.csv         # 场景3详细数据
├── scenario4_severe_drought_results.csv      # 场景4详细数据
├── scenario5_pump_failure_results.csv        # 场景5详细数据
├── comparison_summary.csv                    # 汇总对比表
├── scenario_comparison.png                   # 对比可视化图表
└── COMPARISON_REPORT.md                      # 详细分析报告
```

## 📊 主要分析内容

### 1. 供水保障分析
- 供水保证率对比
- 缺水量统计
- 供水可靠性评估

### 2. 经济性分析
- 运行成本对比
- 单位水成本分析
- 能耗效率对比

### 3. 水库运行分析
- 库容变化趋势
- 最高/最低水位
- 调蓄能力评估

### 4. 系统韧性分析
- 极端条件应对能力
- 设备故障影响
- 风险识别

## 🎯 典型应用场景

### 场景1：正常运行（基准）
**适用于**：
- 日常运行规划
- 成本基准评估
- 常规调度参考

**关键指标**：
- 供水保证率: 100%
- 单位水成本: ~0.11元/m³
- 能耗: ~312 kWh

### 场景2：缺水场景
**适用于**：
- 旱季应急预案
- 水源减少应对
- 节水措施评估

**关键指标**：
- 测试水源减少30%对系统的影响
- 评估水库调蓄作用
- 识别供水瓶颈

### 场景3：高峰需求
**适用于**：
- 节假日供水保障
- 大型活动期间
- 高温天气应对

**关键指标**：
- 需求增加40%的承载能力
- 成本增加幅度
- 系统极限容量

### 场景4：严重干旱
**适用于**：
- 极端干旱预案
- 长期缺水应对
- 应急供水方案

**关键指标**：
- 入流减半 + 低库存双重压力
- 最低安全水位
- 应急调水需求

### 场景5：设备故障
**适用于**：
- 设备检修期间
- 泵站故障应急
- 备用能力评估

**关键指标**：
- 泵站容量降低40%的影响
- 供水保障能力
- 备用设施需求

## 📈 结果解读

### 供水保证率
- **100%**: 完全满足供水需求，系统运行良好
- **95-99%**: 供水基本保障，存在轻微缺水
- **< 95%**: 供水不足，需采取应急措施

### 单位水成本
- 反映运行经济性
- 受电价、能耗、效率影响
- 峰谷电价优化可显著降低成本

### 水库库容
- 库容变化反映调蓄作用
- 过低警戒线需启动应急预案
- 过高需考虑弃水风险

## 🔧 自定义场景

### 修改场景参数

编辑 `multi_scenario_analysis.py` 中的 `SCENARIOS` 字典：

```python
SCENARIOS = {
    "my_scenario": {
        "name": "自定义场景",
        "description": "场景描述",
        "inflow_multiplier": 0.8,      # 入流倍数
        "demand_multiplier": 1.2,      # 需求倍数
        "pump_capacity": 180,          # 泵站容量
        "initial_storage": 45000,      # 初始库容
    },
}
```

### 添加新场景

1. 在 `SCENARIOS` 字典中添加新的场景配置
2. 运行 `multi_scenario_analysis.py`
3. 新场景会自动包含在对比分析中

## 📝 关键发现

基于默认场景配置的分析发现：

1. **系统容量充足**: 在所有测试场景下均能保证100%供水
2. **调蓄能力强**: 水库能有效应对短期入流波动
3. **成本稳定**: 单位水成本在各场景下保持稳定 (~0.11元/m³)
4. **峰谷优化有效**: 通过错峰调度可降低能耗成本

## ⚠️ 建议与改进

### 短期措施
1. 建立场景监测和预警机制
2. 制定不同场景下的调度策略
3. 加强水源预报和需求预测

### 长期规划
1. 增加备用水源或应急水源
2. 提升泵站备用能力
3. 建设智能化监控和调度系统
4. 开展水资源综合利用

## 🔗 相关文档

- [案例1主文档](../README.md)
- [原始案例代码](../urban_water_supply.py)
- [项目总文档](../../README.md)

## 📞 技术支持

如有问题或建议，请参考：
- 项目README: `/README.md`
- 开发文档: `/DEVELOPMENT_SUMMARY.md`
- GitHub Issues: 提交问题反馈

---

**创建日期**: 2025年
**框架版本**: 1.0
**优化引擎**: Pyomo + GLPK
**Python版本**: 3.8+
